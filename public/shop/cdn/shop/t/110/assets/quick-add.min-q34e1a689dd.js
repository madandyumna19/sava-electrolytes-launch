customElements.get("quick-add-modal")||customElements.define("quick-add-modal",class extends ModalDialog{constructor(){super();this.modalContent=this.querySelector('[id^="QuickAddInfo-"]')}hide(a=!1){const b=document.querySelector("cart-notification")||document.querySelector("cart-drawer");b&&b.setActiveElement(this.openedBy);this.modalContent.innerHTML="";a&&(this.openedBy=null);super.hide()}show(a){a.setAttribute("aria-disabled",!0);a.classList.add("loading");a.querySelector(".loading-overlay__spinner").classList.remove("hidden");
fetch(a.getAttribute("data-product-url")).then(b=>b.text()).then(b=>{this.productElement=(new DOMParser).parseFromString(b,"text/html").querySelector('section[id^="MainProduct-"]');this.preventDuplicatedIDs();this.removeDOMElements();this.setInnerHTML(this.modalContent,this.productElement.innerHTML);window.Shopify&&Shopify.PaymentButton&&Shopify.PaymentButton.init();window.ProductModel&&window.ProductModel.loadShopifyXR();this.removeGalleryListSemantic();this.updateImageSizes();this.preventVariantURLSwitching();
super.show(a)}).finally(()=>{a.removeAttribute("aria-disabled");a.classList.remove("loading");a.querySelector(".loading-overlay__spinner").classList.add("hidden")})}setInnerHTML(a,b){a.innerHTML=b;a.querySelectorAll("script").forEach(c=>{const d=document.createElement("script");Array.from(c.attributes).forEach(e=>{d.setAttribute(e.name,e.value)});d.appendChild(document.createTextNode(c.innerHTML));c.parentNode.replaceChild(d,c)})}preventVariantURLSwitching(){const a=this.modalContent.querySelector("variant-radios,variant-selects");
a&&a.setAttribute("data-update-url","false")}removeDOMElements(){var a=this.productElement.querySelector("pickup-availability");a&&a.remove();(a=this.productElement.querySelector("product-modal"))&&a.remove();(a=this.productElement.querySelectorAll("modal-dialog"))&&a.forEach(b=>b.remove())}preventDuplicatedIDs(){const a=this.productElement.dataset.section;this.productElement.innerHTML=this.productElement.innerHTML.replaceAll(a,`quickadd-${a}`);this.productElement.querySelectorAll("variant-selects, variant-radios, product-info").forEach(b=>
{b.dataset.originalSection=a})}removeGalleryListSemantic(){const a=this.modalContent.querySelector('[id^="Slider-Gallery"]');a&&(a.setAttribute("role","presentation"),a.querySelectorAll('[id^="Slide-"]').forEach(b=>b.setAttribute("role","presentation")))}updateImageSizes(){const a=this.modalContent.querySelector(".product");if(a.classList.contains("product--columns")){var b=a.querySelectorAll(".product__media img");if(b.length){var c="(min-width: 1000px) 715px, (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)";
a.classList.contains("product--medium")?c=c.replace("715px","605px"):a.classList.contains("product--small")&&(c=c.replace("715px","495px"));b.forEach(d=>d.setAttribute("sizes",c))}}}});
